@startuml Hexagonal Architecture
skinparam backgroundColor #FAFAFA

title SWEN - Hexagonal Architecture (Ports & Adapters)

skinparam rectangle {
  BorderColor #333333
  RoundCorner 10
}

' Domain (center)
rectangle "**Domain**\n\nEntities\nValue Objects\nAggregates\nDomain Services\nRepository Interfaces\n(Ports)" as domain #E8F5E9

' Application Layer
rectangle "**Application Layer**\n\nCommands\nQueries\nDTOs\nServices" as app #E3F2FD

' Presentation (driving adapters)
rectangle "**Presentation**\n(Driving Adapters)\n\nREST API (FastAPI)\nCLI (Typer)" as pres #FFF3E0

' Infrastructure (driven adapters)
rectangle "**Infrastructure**\n(Driven Adapters)\n\nSQLAlchemy Repositories\nFinTS Adapter\nOllama Adapter\nFernet Encryption" as infra #F3E5F5

' External systems
rectangle "**External**\n\nDatabase\nBanks (FinTS)\nLLM (Ollama)" as ext #F5F5F5

' Connections
pres --> app : drives
app --> domain : uses
domain <.. infra : implements ports
infra --> ext : connects to

note bottom of domain
  **Dependency Rule:**
  All arrows point inward.
  Domain knows nothing about
  databases, APIs, or external services.
end note

@enduml
