@startuml SWEN System Overview
skinparam backgroundColor #FAFAFA

title SWEN - System Overview

' Styling
skinparam rectangle {
  BackgroundColor<<external>> #F5F5F5
  BackgroundColor<<frontend>> #E3F2FD
  BackgroundColor<<backend>> #E8F5E9
  BackgroundColor<<data>> #FFF3E0
  BackgroundColor<<ai>> #F3E5F5
  BorderColor #333333
  RoundCorner 10
}

skinparam actor {
  BackgroundColor #FFFFFF
  BorderColor #333333
}

' Actors
actor "User" as user

' External Systems
rectangle "German Banks\n(FinTS/HBCI)" <<external>> as banks
rectangle "Ollama\n(Local LLM)" <<ai>> as ollama

' Frontend
rectangle "Frontend" <<frontend>> as frontend {
  rectangle "React SPA" as react
  rectangle "TanStack Router" as router
  rectangle "Zustand Store" as store
}

' Backend
rectangle "Backend" <<backend>> as backend {
  rectangle "REST API\n(FastAPI)" as api
  rectangle "CLI\n(Typer)" as cli
  rectangle "Application Layer\n(Commands & Queries)" as app
  rectangle "Domain Layer\n(Business Logic)" as domain
  rectangle "Infrastructure\n(Adapters)" as infra
}

' Data
rectangle "Data Layer" <<data>> as data {
  database "SQLite/PostgreSQL" as db
  file "Encrypted\nCredentials" as creds
}

' Relationships
user --> react : browses
user --> cli : runs

react --> api : HTTP/REST
router --> react
store --> react

api --> app
cli --> app
app --> domain
domain <-- infra : implements ports
infra --> db
infra --> creds
infra --> banks : FinTS protocol
infra --> ollama : categorization

note right of banks
  Fetches transactions
  via FinTS/HBCI protocol
  (requires TAN approval)
end note

note right of ollama
  AI-powered transaction
  categorization (optional)
end note

note bottom of domain
  Pure business logic
  No external dependencies
end note

@enduml
