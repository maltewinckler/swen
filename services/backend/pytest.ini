[pytest]
# Pytest configuration for banking-bot

# Test markers
markers =
    integration: Integration tests with real database (requires Docker for Testcontainers)
    e2e: End-to-end tests for complete user journeys (requires Docker for Testcontainers)
    tan: Tests that require TAN approval (manual only)
    manual: Tests requiring manual intervention
    slow: Tests that take more than 1 second

# Default options
addopts =
    -v
    --strict-markers
    # Show test durations
    --durations=10
    # Show local variables in tracebacks
    --showlocals
    # Note: Integration/manual tests auto-skip via conftest.py
    # Enable with: --run-integration, --run-manual, or --run-all
    # Or env vars: RUN_INTEGRATION=1, RUN_MANUAL_TAN=1, RUN_ALL_TESTS=1

# Async support
asyncio_mode = auto

# Filter warnings
filterwarnings =
    ignore:The @wait_container_is_ready decorator is deprecated:DeprecationWarning:testcontainers

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Coverage options (when --cov is used)
[coverage:run]
source = swen
omit =
    */tests/*
    */__pycache__/*
    */migrations/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False
