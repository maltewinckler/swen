# SWEN Configuration
#
# Copy this file to:
#   - .env.dev  for local development (backend + frontend via Makefile)
#   - .env      for production (Docker deployment)
#
# Generate secrets with: make secrets

# =============================================================================
# Application
# =============================================================================
APP_NAME=SWEN
DEBUG=false
# DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
# Docker: use 'postgres' as host (container name)
# Local dev: use 'localhost'
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=change_me_in_production

# =============================================================================
# Security
# =============================================================================
# Generate with: docker compose run --rm --no-deps backend swen secrets generate
ENCRYPTION_KEY=your-fernet-key-here
JWT_SECRET_KEY=your-jwt-secret-here

# =============================================================================
# API Server
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=false

# CORS: Comma-separated list of allowed origins (no wildcards with cookies!)
# Add your production domain here
API_CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRE_HOURS=1
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie security
# - Local dev: COOKIE_SECURE=false (HTTP works)
# - Production with HTTPS: COOKIE_SECURE=true (required!)
API_COOKIE_SECURE=false
API_COOKIE_SAMESITE=lax

# Set to true when behind a reverse proxy (Caddy, nginx)
API_TRUST_PROXY_HEADERS=false

# =============================================================================
# User Registration
# =============================================================================
# "open" = anyone can register
# "admin_only" = only admins can create users (default)
# Note: The first registered user automatically becomes admin
REGISTRATION_MODE=admin_only

# =============================================================================
# SMTP (Password Reset Emails)
# =============================================================================
# Enable to allow password reset via email
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=SWEN
SMTP_USE_TLS=true
SMTP_STARTTLS=true

# Frontend URL for password reset links (no trailing slash)
# This should match where users access the frontend
FRONTEND_BASE_URL=http://localhost:3000

# =============================================================================
# ML Service (Transaction Classification)
# =============================================================================
# Enable ML-powered transaction classification
ML_SERVICE_ENABLED=true

# ML service URL
# Docker: use 'ml' as host (container name)
# Local dev: use 'localhost'
ML_SERVICE_URL=http://ml:8100

# Request timeout in seconds
ML_SERVICE_TIMEOUT=10.0

# =============================================================================
# ML Service (Internal Configuration)
# =============================================================================
# ML service search enrichment URL
# Docker: use 'searxng' as host (container name)
# Local dev: use 'localhost:8888'
SWEN_ML_ENRICHMENT_SEARXNG_URL=http://searxng:8080

# ML encoder configuration
# "sentence-transformers" (default) or "huggingface"
SWEN_ML_ENCODER_BACKEND=sentence-transformers
SWEN_ML_ENCODER_MODEL=paraphrase-multilingual-MiniLM-L12-v2
SWEN_ML_DEVICE=cpu

# ML service logging
SWEN_ML_LOG_LEVEL=INFO
