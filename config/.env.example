# SWEN Configuration
#
# Copy this file to:
#   - .env.dev  for local development (backend + frontend via Makefile)
#   - .env      for production (Docker deployment)
#
# Generate secrets with: make secrets

# =============================================================================
# Application
# =============================================================================
APP_NAME=SWEN
DEBUG=false

# =============================================================================
# Database (PostgreSQL)
# =============================================================================
# Docker: use 'postgres' as host (container name)
# Local dev: use 'localhost'
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=swen
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_DB=swen

# =============================================================================
# Security
# =============================================================================
# Generate with: docker compose run --rm --no-deps backend swen secrets generate
ENCRYPTION_KEY=your-fernet-key-here
JWT_SECRET_KEY=your-jwt-secret-here

# =============================================================================
# API Server
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_DEBUG=false

# CORS: Comma-separated list of allowed origins (no wildcards with cookies!)
# Add your production domain here
API_CORS_ORIGINS=http://localhost,http://localhost:3000,http://localhost:5173

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRE_HOURS=1
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie security
# - Local dev: COOKIE_SECURE=false (HTTP works)
# - Production with HTTPS: COOKIE_SECURE=true (required!)
API_COOKIE_SECURE=false
API_COOKIE_SAMESITE=lax

# Set to true when behind a reverse proxy (Caddy, nginx)
API_TRUST_PROXY_HEADERS=false

# =============================================================================
# AI (Ollama) - Counter-Account Resolution
# =============================================================================
AI_ENABLED=true
AI_PROVIDER=ollama
AI_OLLAMA_MODEL=qwen2.5:1.5b
AI_OLLAMA_TIMEOUT=30.0
AI_MIN_CONFIDENCE=0.7

# Docker: use 'ollama' as host (container name)
# Local dev: use 'localhost'
OLLAMA_HOST=ollama
OLLAMA_PORT=11434

# =============================================================================
# Banking / FinTS
# =============================================================================
# Register at: https://www.hbci-zka.de/register/prod_register.htm
FINTS_PRODUCT_ID=your-product-id-here

# =============================================================================
# User Registration
# =============================================================================
# "open" = anyone can register
# "admin_only" = only admins can create users (default)
# Note: The first registered user automatically becomes admin
REGISTRATION_MODE=admin_only

# =============================================================================
# SMTP (Password Reset Emails)
# =============================================================================
# Enable to allow password reset via email
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@example.com
SMTP_FROM_NAME=SWEN
SMTP_USE_TLS=true
SMTP_STARTTLS=true

# Frontend URL for password reset links (no trailing slash)
# This should match where users access the frontend
FRONTEND_BASE_URL=http://localhost:3000

# =============================================================================
# Logging
# =============================================================================
# DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO
